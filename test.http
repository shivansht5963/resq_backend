### Campus Security & Emergency Response System - API Testing
### Base URL: http://localhost:8000

#####################
### AUTHENTICATION ###
#####################

### Login - Student
POST http://localhost:8000/api/auth/login/
Content-Type: application/json

{
  "email": "student@example.com",
  "password": "student123"
}

###

### Login - Guard
POST http://localhost:8000/api/auth/login/
Content-Type: application/json

{
  "email": "guard@example.com",
  "password": "guard123"
}

###

### Login - Admin
POST http://localhost:8000/api/auth/login/
Content-Type: application/json

{
  "email": "admin@resq.local",
  "password": "admin123"
}

###

### Login - Invalid Credentials
POST http://localhost:8000/api/auth/login/
Content-Type: application/json

{
  "email": "student@example.com",
  "password": "wrongpassword"
}

###

### Logout (Requires Valid Token)
POST http://localhost:8000/api/auth/logout/
Authorization: Token 57a07270bf424117858e3600a63e417545382f44

#####################
### BEACONS ###
#####################

### List Beacons
GET http://localhost:8000/api/beacons/
Authorization: Token d5791949efd5d4928e04caefce748b2fe2e98335

###

### Get Beacon Details
GET http://localhost:8000/api/beacons/1/
Authorization: Token d5791949efd5d4928e04caefce748b2fe2e98335

#####################
### INCIDENTS ###
#####################

### ESP32 Panic Button
POST https://resq-server.onrender.com/api/panic/
Content-Type: application/json

{
  "device_id": "ESP32-002"
}

###

### List Incidents
GET http://localhost:8000/api/incidents/
Authorization: Token d5791949efd5d4928e04caefce748b2fe2e98335

###

### Get Incident Details
GET http://localhost:8000/api/incidents/1/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Create Incident via App (Students Only)
POST http://localhost:8000/api/incidents/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{
  "beacon": 1,
  "incident_type": "EMERGENCY",
  "description": "Emergency at the library"
}

###

### Update Incident Status
POST http://localhost:8000/api/incidents/1/update_status/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{
  "status": "IN_PROGRESS"
}

###

### Resolve Incident
POST http://localhost:8000/api/incidents/1/resolve/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{}

###

### Assign Guard to Incident
POST http://localhost:8000/api/incidents/1/assign_guard/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{
  "guard_id": 1
}

#####################
### GUARDS ###
#####################

### List Guard Profiles
GET http://localhost:8000/api/guards/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Get Guard Profile Details
GET http://localhost:8000/api/guards/1/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Set Guard Beacon Location (Beacon-based positioning)
POST http://localhost:8000/api/guards/1/set_beacon/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{
  "beacon_id": "BEACON-001"
}

#####################
### ASSIGNMENTS ###
#####################

### List Guard Assignments
GET http://localhost:8000/api/assignments/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Get Assignment Details
GET http://localhost:8000/api/assignments/1/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Deactivate Assignment
POST http://localhost:8000/api/assignments/1/deactivate/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{}

#####################
### DEVICE TOKENS ###
#####################

### List Device Tokens
GET http://localhost:8000/api/device-tokens/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Register Device Token (FCM)
POST http://localhost:8000/api/device-tokens/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{
  "token": "ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]",
  "platform": "ANDROID"
}

###

### Delete Device Token
DELETE http://localhost:8000/api/device-tokens/1/
Authorization: Token PASTE_YOUR_TOKEN_HERE

#####################
### GUARD ALERTS (NEAREST GUARD) ###
#####################

### List Alerts (Guards see their alerts, Admins see all)
GET http://localhost:8000/api/alerts/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Get Alert Details
GET http://localhost:8000/api/alerts/1/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Guard Acknowledges Alert (Will respond)
POST http://localhost:8000/api/alerts/1/acknowledge/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{}

###

### Guard Declines Alert (Busy/unavailable)
POST http://localhost:8000/api/alerts/1/decline/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{}

#####################
### CONVERSATIONS ###
#####################

### List Conversations
GET http://localhost:8000/api/conversations/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Get Conversation Details
GET http://localhost:8000/api/conversations/1/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Get Conversation Messages
GET http://localhost:8000/api/conversations/1/messages/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Send Message in Conversation
POST http://localhost:8000/api/conversations/1/send_message/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{
  "content": "Help needed at the south entrance!"
}

#####################
### MESSAGES ###
#####################

### List Messages
GET http://localhost:8000/api/messages/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Get Message Details
GET http://localhost:8000/api/messages/1/
Authorization: Token PASTE_YOUR_TOKEN_HERE

#####################
### AI EVENTS ###
#####################

### List AI Events
GET http://localhost:8000/api/ai-events/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Get AI Event Details
GET http://localhost:8000/api/ai-events/1/
Authorization: Token PASTE_YOUR_TOKEN_HERE

###

### Log AI Detection Event
POST http://localhost:8000/api/ai-events/log_event/
Content-Type: application/json
Authorization: Token PASTE_YOUR_TOKEN_HERE

{
  "incident_id": 1,
  "event_type": "VISION",
  "confidence_score": 0.95,
  "details": {
    "object_detected": "person_falling",
    "location": "library_floor_3"
  }
}

#####################
### NOTES ###
#####################

# How to use:
# 1. Install VSCode REST Client extension (humao.rest-client)
# 2. Click "Send Request" above each request
# 3. Response appears in side panel
#
# Steps:
# Step 1: Run "Login - Student" to get a token
# Step 2: Copy the auth_token value from the response
# Step 3: Replace PASTE_YOUR_TOKEN_HERE with the actual token
# Step 4: Test other endpoints
#
# Test Users:
# - student@example.com / student123 (STUDENT role)
# - guard@example.com / guard123 (GUARD role)
# - admin@resq.local / admin123 (ADMIN role)
#
# Status Values for Incidents:
# - CREATED
# - ASSIGNED
# - IN_PROGRESS
# - RESOLVED
#
# Event Types for AI:
# - VISION (computer vision detection)
# - AUDIO (audio analysis results)
